From 399a52e7d2a62dc56dbbd1e5aba4b41a5bcb436f Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Fri, 23 Jan 2026 23:51:29 +1100
Subject: [PATCH 5/6] disable some gandiva tests related to tzdb handling

from upstream: "Gandiva is unmaintained, feel free to disable those tests."
see https://github.com/apache/arrow/issues/48874
---
 cpp/src/gandiva/gdv_function_stubs_test.cc | 4 ++--
 cpp/src/gandiva/tests/date_time_test.cc    | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/cpp/src/gandiva/gdv_function_stubs_test.cc b/cpp/src/gandiva/gdv_function_stubs_test.cc
index cbe24b7423..98b9ec6372 100644
--- a/cpp/src/gandiva/gdv_function_stubs_test.cc
+++ b/cpp/src/gandiva/gdv_function_stubs_test.cc
@@ -1068,7 +1068,7 @@ TEST(TestGdvFnStubs, TestTranslate) {
   EXPECT_EQ(expected, std::string(result, out_len));
 }
 
-TEST(TestGdvFnStubs, TestToUtcTimezone) {
+TEST(TestGdvFnStubs, DISABLED_TestToUtcTimezone) {
   gandiva::ExecutionContext context;
   auto context_ptr = reinterpret_cast<int64_t>(&context);
   auto len_ist = static_cast<gdv_int32>(strlen("Asia/Kolkata"));
@@ -1104,7 +1104,7 @@ TEST(TestGdvFnStubs, TestToUtcTimezone) {
   EXPECT_THAT(context.get_error(), "America/LA is an invalid time zone name.");
 }
 
-TEST(TestGdvFnStubs, TestFromUtcTimezone) {
+TEST(TestGdvFnStubs, DISABLED_TestFromUtcTimezone) {
   ExecutionContext context;
   auto context_ptr = reinterpret_cast<int64_t>(&context);
   auto len_ist = static_cast<gdv_int32>(strlen("Asia/Kolkata"));
diff --git a/cpp/src/gandiva/tests/date_time_test.cc b/cpp/src/gandiva/tests/date_time_test.cc
index 6208f1ecba..52717d90f7 100644
--- a/cpp/src/gandiva/tests/date_time_test.cc
+++ b/cpp/src/gandiva/tests/date_time_test.cc
@@ -721,7 +721,7 @@ TEST_F(DateTimeTestProjector, TestToTimestampFromInt) {
   EXPECT_ARROW_ARRAY_EQUALS(exp_output1, outputs.at(3));
 }
 
-TEST_F(DateTimeTestProjector, TestToUtcTimestamp) {
+TEST_F(DateTimeTestProjector, DISABLED_TestToUtcTimestamp) {
   auto f0 = field("f0", timestamp(arrow::TimeUnit::MILLI));
   auto f1 = field("f1", arrow::utf8());
 
@@ -775,7 +775,7 @@ TEST_F(DateTimeTestProjector, TestToUtcTimestamp) {
   EXPECT_ARROW_ARRAY_EQUALS(exp_output, outputs.at(0));
 }
 
-TEST_F(DateTimeTestProjector, TestFromUtcTimestamp) {
+TEST_F(DateTimeTestProjector, DISABLED_TestFromUtcTimestamp) {
   auto f0 = field("f0", timestamp(arrow::TimeUnit::MILLI));
   auto f1 = field("f1", arrow::utf8());
 
